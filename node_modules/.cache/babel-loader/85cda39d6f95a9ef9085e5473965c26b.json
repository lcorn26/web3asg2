{"ast":null,"code":"import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport * as React from 'react';\nimport { isLeaf, restoreCompatibleValue } from '../util';\n\nvar defaultFilter = function defaultFilter(search, options, _ref) {\n  var label = _ref.label;\n  return options.some(function (opt) {\n    return String(opt[label]).toLowerCase().includes(search.toLowerCase());\n  });\n};\n\nvar defaultRender = function defaultRender(inputValue, path, prefixCls, fieldNames) {\n  return path.map(function (opt) {\n    return opt[fieldNames.label];\n  }).join(' / ');\n};\n\nexport default function useSearchResult(resultConfig) {\n  var searchConfig = resultConfig.searchConfig,\n      flattenOptions = resultConfig.flattenOptions,\n      fieldNames = resultConfig.fieldNames,\n      changeOnSelect = resultConfig.changeOnSelect,\n      searchValue = resultConfig.searchValue,\n      prefixCls = resultConfig.prefixCls; // ============================== MISC ==============================\n\n  var filterOption = searchConfig.filter || defaultFilter;\n  var renderOption = searchConfig.render || defaultRender; // ============================= Filter =============================\n  // Do filter\n\n  var filteredEntityList = React.useMemo(function () {\n    if (!searchValue) {\n      return [];\n    } // Normalize list\n\n\n    var normalizeList = flattenOptions.map(function (option) {\n      var _restoreCompatibleVal = restoreCompatibleValue(option, fieldNames),\n          options = _restoreCompatibleVal.options;\n\n      var originOptionList = options.map(function (opt) {\n        return opt.node;\n      });\n      return {\n        option: option,\n        originOptionList: originOptionList\n      };\n    }); // Not keep parent node when !changeOnSelect\n\n    if (!changeOnSelect) {\n      normalizeList = normalizeList.filter(function (_ref2) {\n        var option = _ref2.option;\n        return isLeaf(option.data);\n      });\n    } // Filter\n\n\n    var filteredList = [];\n\n    for (var i = 0; i < normalizeList.length; i += 1) {\n      // Perf saving if enabled\n      if (!searchConfig.sort && filteredList.length >= searchConfig.limit) {\n        break;\n      } // Do filter\n\n\n      var optGrp = normalizeList[i];\n\n      if (filterOption(searchValue, optGrp.originOptionList, fieldNames)) {\n        filteredList.push(optGrp);\n      }\n    } // Sort: When searchConfig.sort is enabled. We have to filter all the list\n\n\n    if (searchConfig.sort) {\n      filteredList.sort(function (a, b) {\n        return searchConfig.sort(a.originOptionList, b.originOptionList, searchValue, fieldNames);\n      });\n    }\n\n    return filteredList;\n  }, [flattenOptions, fieldNames, searchValue, filterOption, changeOnSelect, searchConfig]); // ======================== Generate Options ========================\n  // Wrap with connected label\n\n  var options = React.useMemo(function () {\n    return filteredEntityList.map(function (_ref3) {\n      var option = _ref3.option,\n          originOptionList = _ref3.originOptionList;\n      var title = renderOption(searchValue, originOptionList, prefixCls, fieldNames);\n      return _objectSpread(_objectSpread({}, option.data), {}, {\n        title: title\n      });\n    });\n  }, [searchValue, renderOption, filteredEntityList, fieldNames, prefixCls]);\n  return options;\n}","map":{"version":3,"sources":["D:/Documents/School Stuff/Web 3/ASG 2/web3asg2/node_modules/rc-cascader/es/hooks/useSearchResult.js"],"names":["_objectSpread","React","isLeaf","restoreCompatibleValue","defaultFilter","search","options","_ref","label","some","opt","String","toLowerCase","includes","defaultRender","inputValue","path","prefixCls","fieldNames","map","join","useSearchResult","resultConfig","searchConfig","flattenOptions","changeOnSelect","searchValue","filterOption","filter","renderOption","render","filteredEntityList","useMemo","normalizeList","option","_restoreCompatibleVal","originOptionList","node","_ref2","data","filteredList","i","length","sort","limit","optGrp","push","a","b","_ref3","title"],"mappings":"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","sourcesContent":["import _objectSpread from \"@babel/runtime/helpers/esm/objectSpread2\";\nimport * as React from 'react';\nimport { isLeaf, restoreCompatibleValue } from '../util';\n\nvar defaultFilter = function defaultFilter(search, options, _ref) {\n  var label = _ref.label;\n  return options.some(function (opt) {\n    return String(opt[label]).toLowerCase().includes(search.toLowerCase());\n  });\n};\n\nvar defaultRender = function defaultRender(inputValue, path, prefixCls, fieldNames) {\n  return path.map(function (opt) {\n    return opt[fieldNames.label];\n  }).join(' / ');\n};\n\nexport default function useSearchResult(resultConfig) {\n  var searchConfig = resultConfig.searchConfig,\n      flattenOptions = resultConfig.flattenOptions,\n      fieldNames = resultConfig.fieldNames,\n      changeOnSelect = resultConfig.changeOnSelect,\n      searchValue = resultConfig.searchValue,\n      prefixCls = resultConfig.prefixCls; // ============================== MISC ==============================\n\n  var filterOption = searchConfig.filter || defaultFilter;\n  var renderOption = searchConfig.render || defaultRender; // ============================= Filter =============================\n  // Do filter\n\n  var filteredEntityList = React.useMemo(function () {\n    if (!searchValue) {\n      return [];\n    } // Normalize list\n\n\n    var normalizeList = flattenOptions.map(function (option) {\n      var _restoreCompatibleVal = restoreCompatibleValue(option, fieldNames),\n          options = _restoreCompatibleVal.options;\n\n      var originOptionList = options.map(function (opt) {\n        return opt.node;\n      });\n      return {\n        option: option,\n        originOptionList: originOptionList\n      };\n    }); // Not keep parent node when !changeOnSelect\n\n    if (!changeOnSelect) {\n      normalizeList = normalizeList.filter(function (_ref2) {\n        var option = _ref2.option;\n        return isLeaf(option.data);\n      });\n    } // Filter\n\n\n    var filteredList = [];\n\n    for (var i = 0; i < normalizeList.length; i += 1) {\n      // Perf saving if enabled\n      if (!searchConfig.sort && filteredList.length >= searchConfig.limit) {\n        break;\n      } // Do filter\n\n\n      var optGrp = normalizeList[i];\n\n      if (filterOption(searchValue, optGrp.originOptionList, fieldNames)) {\n        filteredList.push(optGrp);\n      }\n    } // Sort: When searchConfig.sort is enabled. We have to filter all the list\n\n\n    if (searchConfig.sort) {\n      filteredList.sort(function (a, b) {\n        return searchConfig.sort(a.originOptionList, b.originOptionList, searchValue, fieldNames);\n      });\n    }\n\n    return filteredList;\n  }, [flattenOptions, fieldNames, searchValue, filterOption, changeOnSelect, searchConfig]); // ======================== Generate Options ========================\n  // Wrap with connected label\n\n  var options = React.useMemo(function () {\n    return filteredEntityList.map(function (_ref3) {\n      var option = _ref3.option,\n          originOptionList = _ref3.originOptionList;\n      var title = renderOption(searchValue, originOptionList, prefixCls, fieldNames);\n      return _objectSpread(_objectSpread({}, option.data), {}, {\n        title: title\n      });\n    });\n  }, [searchValue, renderOption, filteredEntityList, fieldNames, prefixCls]);\n  return options;\n}"]},"metadata":{},"sourceType":"module"}