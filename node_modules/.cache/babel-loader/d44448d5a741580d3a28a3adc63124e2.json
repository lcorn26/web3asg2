{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport { useMemo } from 'react';\nimport generateSelector from \"rc-select/es/generate\";\nimport { getLabeledValue } from \"rc-select/es/utils/valueUtil\";\nimport { convertDataToEntities } from \"rc-tree/es/utils/treeUtil\";\nimport { conductCheck } from \"rc-tree/es/utils/conductUtil\";\nimport omit from \"rc-util/es/omit\";\nimport { INTERNAL_PROPS_MARK } from \"rc-select/es/interface/generator\";\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport warning from \"rc-util/es/warning\";\nimport TreeNode from './TreeNode';\nimport { flattenOptions, filterOptions, isValueDisabled, findValueOption, addValue, removeValue, getRawValueLabeled, toArray, fillFieldNames } from './utils/valueUtil';\nimport warningProps from './utils/warningPropsUtil';\nimport { SelectContext } from './Context';\nimport useTreeData from './hooks/useTreeData';\nimport useKeyValueMap from './hooks/useKeyValueMap';\nimport useKeyValueMapping from './hooks/useKeyValueMapping';\nimport { formatStrategyKeys, SHOW_ALL, SHOW_PARENT, SHOW_CHILD } from './utils/strategyUtil';\nimport { fillAdditionalInfo } from './utils/legacyUtil';\nimport useSelectValues from './hooks/useSelectValues';\nvar OMIT_PROPS = ['expandedKeys', 'treeData', 'treeCheckable', 'showCheckedStrategy', 'searchPlaceholder', 'treeLine', 'treeIcon', 'showTreeIcon', 'switcherIcon', 'treeNodeFilterProp', 'filterTreeNode', 'dropdownPopupAlign', 'treeDefaultExpandAll', 'treeCheckStrictly', 'treeExpandedKeys', 'treeLoadedKeys', 'treeMotion', 'onTreeExpand', 'onTreeLoad', 'labelRender', 'loadData', 'treeDataSimpleMode', 'treeNodeLabelProp', 'treeDefaultExpandedKeys'];\nexport default function generate(config) {\n  var prefixCls = config.prefixCls,\n      optionList = config.optionList;\n  var RefSelect = generateSelector({\n    prefixCls: prefixCls,\n    components: {\n      optionList: optionList\n    },\n    // Not use generate since we will handle ourself\n    convertChildrenToData: function convertChildrenToData() {\n      return null;\n    },\n    flattenOptions: flattenOptions,\n    // Handle `optionLabelProp` in TreeSelect component\n    getLabeledValue: getLabeledValue,\n    filterOptions: filterOptions,\n    isValueDisabled: isValueDisabled,\n    findValueOption: findValueOption,\n    omitDOMProps: function omitDOMProps(props) {\n      return omit(props, OMIT_PROPS);\n    }\n  });\n  RefSelect.displayName = 'Select'; // =================================================================================\n  // =                                      Tree                                     =\n  // =================================================================================\n\n  var RefTreeSelect = /*#__PURE__*/React.forwardRef(function (props, ref) {\n    var fieldNames = props.fieldNames,\n        multiple = props.multiple,\n        treeCheckable = props.treeCheckable,\n        treeCheckStrictly = props.treeCheckStrictly,\n        _props$showCheckedStr = props.showCheckedStrategy,\n        showCheckedStrategy = _props$showCheckedStr === void 0 ? 'SHOW_CHILD' : _props$showCheckedStr,\n        labelInValue = props.labelInValue,\n        loadData = props.loadData,\n        treeLoadedKeys = props.treeLoadedKeys,\n        _props$treeNodeFilter = props.treeNodeFilterProp,\n        treeNodeFilterProp = _props$treeNodeFilter === void 0 ? 'value' : _props$treeNodeFilter,\n        treeNodeLabelProp = props.treeNodeLabelProp,\n        treeDataSimpleMode = props.treeDataSimpleMode,\n        treeData = props.treeData,\n        treeExpandedKeys = props.treeExpandedKeys,\n        treeDefaultExpandedKeys = props.treeDefaultExpandedKeys,\n        treeDefaultExpandAll = props.treeDefaultExpandAll,\n        children = props.children,\n        treeIcon = props.treeIcon,\n        showTreeIcon = props.showTreeIcon,\n        switcherIcon = props.switcherIcon,\n        treeLine = props.treeLine,\n        treeMotion = props.treeMotion,\n        filterTreeNode = props.filterTreeNode,\n        dropdownPopupAlign = props.dropdownPopupAlign,\n        onChange = props.onChange,\n        onTreeExpand = props.onTreeExpand,\n        onTreeLoad = props.onTreeLoad,\n        onDropdownVisibleChange = props.onDropdownVisibleChange,\n        onSelect = props.onSelect,\n        onDeselect = props.onDeselect,\n        labelRender = props.labelRender;\n    var mergedCheckable = treeCheckable || treeCheckStrictly;\n    var mergedMultiple = multiple || mergedCheckable;\n    var treeConduction = treeCheckable && !treeCheckStrictly;\n    var mergedLabelInValue = treeCheckStrictly || labelInValue; // ======================= Tree Data =======================\n    // FieldNames\n\n    var mergedFieldNames = fillFieldNames(fieldNames, true); // Legacy both support `label` or `title` if not set.\n    // We have to fallback to function to handle this\n\n    var getTreeNodeTitle = function getTreeNodeTitle(node) {\n      if (!treeData) {\n        return node.title;\n      }\n\n      if (mergedFieldNames === null || mergedFieldNames === void 0 ? void 0 : mergedFieldNames.label) {\n        return node[mergedFieldNames.label];\n      }\n\n      return node.label || node.title;\n    };\n\n    var getTreeNodeLabelProp = function getTreeNodeLabelProp(entity, val) {\n      if (labelRender) {\n        return labelRender(entity, val);\n      } // Skip since entity not exist\n\n\n      if (!entity) {\n        return undefined;\n      }\n\n      var node = entity.data.node;\n\n      if (treeNodeLabelProp) {\n        return node[treeNodeLabelProp];\n      }\n\n      return getTreeNodeTitle(node);\n    };\n\n    var mergedTreeData = useTreeData(treeData, children, {\n      getLabelProp: getTreeNodeTitle,\n      simpleMode: treeDataSimpleMode,\n      fieldNames: mergedFieldNames\n    });\n    var flattedOptions = useMemo(function () {\n      return flattenOptions(mergedTreeData);\n    }, [mergedTreeData]);\n\n    var _useKeyValueMap = useKeyValueMap(flattedOptions),\n        _useKeyValueMap2 = _slicedToArray(_useKeyValueMap, 2),\n        cacheKeyMap = _useKeyValueMap2[0],\n        cacheValueMap = _useKeyValueMap2[1];\n\n    var _useKeyValueMapping = useKeyValueMapping(cacheKeyMap, cacheValueMap),\n        _useKeyValueMapping2 = _slicedToArray(_useKeyValueMapping, 2),\n        getEntityByKey = _useKeyValueMapping2[0],\n        getEntityByValue = _useKeyValueMapping2[1]; // Only generate keyEntities for check conduction when is `treeCheckable`\n\n\n    var _useMemo = useMemo(function () {\n      if (treeConduction) {\n        return convertDataToEntities(mergedTreeData);\n      }\n\n      return {\n        keyEntities: null\n      };\n    }, [mergedTreeData, treeCheckable, treeCheckStrictly]),\n        conductKeyEntities = _useMemo.keyEntities; // ========================== Ref ==========================\n\n\n    var selectRef = React.useRef(null);\n    React.useImperativeHandle(ref, function () {\n      return {\n        scrollTo: selectRef.current.scrollTo,\n        focus: selectRef.current.focus,\n        blur: selectRef.current.blur,\n\n        /** @private Internal usage. It's save to remove if `rc-cascader` not use it any longer */\n        getEntityByValue: getEntityByValue\n      };\n    }); // ========================= Value =========================\n\n    var _useMergedState = useMergedState(props.defaultValue, {\n      value: props.value\n    }),\n        _useMergedState2 = _slicedToArray(_useMergedState, 2),\n        value = _useMergedState2[0],\n        setValue = _useMergedState2[1];\n    /** Get `missingRawValues` which not exist in the tree yet */\n\n\n    var splitRawValues = function splitRawValues(newRawValues) {\n      var missingRawValues = [];\n      var existRawValues = []; // Keep missing value in the cache\n\n      newRawValues.forEach(function (val) {\n        if (getEntityByValue(val)) {\n          existRawValues.push(val);\n        } else {\n          missingRawValues.push(val);\n        }\n      });\n      return {\n        missingRawValues: missingRawValues,\n        existRawValues: existRawValues\n      };\n    };\n\n    var _useMemo2 = useMemo(function () {\n      var valueHalfCheckedKeys = [];\n      var newRawValues = [];\n      toArray(value).forEach(function (item) {\n        if (item && _typeof(item) === 'object' && 'value' in item) {\n          if (item.halfChecked && treeCheckStrictly) {\n            var entity = getEntityByValue(item.value);\n            valueHalfCheckedKeys.push(entity ? entity.key : item.value);\n          } else {\n            newRawValues.push(item.value);\n          }\n        } else {\n          newRawValues.push(item);\n        }\n      }); // We need do conduction of values\n      // We need do conduction of values\n\n      if (treeConduction) {\n        var _splitRawValues = splitRawValues(newRawValues),\n            missingRawValues = _splitRawValues.missingRawValues,\n            existRawValues = _splitRawValues.existRawValues;\n\n        var keyList = existRawValues.map(function (val) {\n          return getEntityByValue(val).key;\n        });\n\n        var _conductCheck = conductCheck(keyList, true, conductKeyEntities),\n            checkedKeys = _conductCheck.checkedKeys,\n            halfCheckedKeys = _conductCheck.halfCheckedKeys;\n\n        return [[].concat(_toConsumableArray(missingRawValues), _toConsumableArray(checkedKeys.map(function (key) {\n          return getEntityByKey(key).data.value;\n        }))), halfCheckedKeys];\n      }\n\n      return [newRawValues, valueHalfCheckedKeys];\n    }, [value, flattedOptions, mergedMultiple, mergedLabelInValue, treeCheckable, treeCheckStrictly]),\n        _useMemo3 = _slicedToArray(_useMemo2, 2),\n        rawValues = _useMemo3[0],\n        rawHalfCheckedKeys = _useMemo3[1];\n\n    var selectValues = useSelectValues(rawValues, {\n      treeConduction: treeConduction,\n      value: value,\n      showCheckedStrategy: showCheckedStrategy,\n      conductKeyEntities: conductKeyEntities,\n      getEntityByValue: getEntityByValue,\n      getEntityByKey: getEntityByKey,\n      getLabelProp: getTreeNodeLabelProp\n    });\n\n    var triggerChange = function triggerChange(newRawValues, extra, source) {\n      setValue(mergedMultiple ? newRawValues : newRawValues[0]);\n\n      if (onChange) {\n        var eventValues = newRawValues;\n\n        if (treeConduction && showCheckedStrategy !== 'SHOW_ALL') {\n          var keyList = newRawValues.map(function (val) {\n            var entity = getEntityByValue(val);\n            return entity ? entity.key : val;\n          });\n          var formattedKeyList = formatStrategyKeys(keyList, showCheckedStrategy, conductKeyEntities);\n          eventValues = formattedKeyList.map(function (key) {\n            var entity = getEntityByKey(key);\n            return entity ? entity.data.value : key;\n          });\n        }\n\n        var _ref = extra || {\n          triggerValue: undefined,\n          selected: undefined\n        },\n            triggerValue = _ref.triggerValue,\n            selected = _ref.selected;\n\n        var returnValues = mergedLabelInValue ? getRawValueLabeled(eventValues, value, getEntityByValue, getTreeNodeLabelProp) : eventValues; // We need fill half check back\n\n        if (treeCheckStrictly) {\n          var halfValues = rawHalfCheckedKeys.map(function (key) {\n            var entity = getEntityByKey(key);\n            return entity ? entity.data.value : key;\n          }).filter(function (val) {\n            return !eventValues.includes(val);\n          });\n          returnValues = [].concat(_toConsumableArray(returnValues), _toConsumableArray(getRawValueLabeled(halfValues, value, getEntityByValue, getTreeNodeLabelProp)));\n        }\n\n        var additionalInfo = {\n          // [Legacy] Always return as array contains label & value\n          preValue: selectValues,\n          triggerValue: triggerValue\n        }; // [Legacy] Fill legacy data if user query.\n        // This is expansive that we only fill when user query\n        // https://github.com/react-component/tree-select/blob/fe33eb7c27830c9ac70cd1fdb1ebbe7bc679c16a/src/Select.jsx\n\n        var showPosition = true;\n\n        if (treeCheckStrictly || source === 'selection' && !selected) {\n          showPosition = false;\n        }\n\n        fillAdditionalInfo(additionalInfo, triggerValue, newRawValues, mergedTreeData, showPosition);\n\n        if (mergedCheckable) {\n          additionalInfo.checked = selected;\n        } else {\n          additionalInfo.selected = selected;\n        }\n\n        onChange(mergedMultiple ? returnValues : returnValues[0], mergedLabelInValue ? null : eventValues.map(function (val) {\n          var entity = getEntityByValue(val);\n          return entity ? entity.data.title : null;\n        }), additionalInfo);\n      }\n    };\n\n    var onInternalSelect = function onInternalSelect(selectValue, option, source) {\n      var eventValue = mergedLabelInValue ? selectValue : selectValue;\n\n      if (!mergedMultiple) {\n        // Single mode always set value\n        triggerChange([selectValue], {\n          selected: true,\n          triggerValue: selectValue\n        }, source);\n      } else {\n        var newRawValues = addValue(rawValues, selectValue); // Add keys if tree conduction\n\n        if (treeConduction) {\n          // Should keep missing values\n          var _splitRawValues2 = splitRawValues(newRawValues),\n              missingRawValues = _splitRawValues2.missingRawValues,\n              existRawValues = _splitRawValues2.existRawValues;\n\n          var keyList = existRawValues.map(function (val) {\n            return getEntityByValue(val).key;\n          });\n\n          var _conductCheck2 = conductCheck(keyList, true, conductKeyEntities),\n              checkedKeys = _conductCheck2.checkedKeys;\n\n          newRawValues = [].concat(_toConsumableArray(missingRawValues), _toConsumableArray(checkedKeys.map(function (key) {\n            return getEntityByKey(key).data.value;\n          })));\n        }\n\n        triggerChange(newRawValues, {\n          selected: true,\n          triggerValue: selectValue\n        }, source);\n      }\n\n      if (onSelect) {\n        onSelect(eventValue, option);\n      }\n    };\n\n    var onInternalDeselect = function onInternalDeselect(selectValue, option, source) {\n      var eventValue = mergedLabelInValue ? selectValue : selectValue;\n      var newRawValues = removeValue(rawValues, selectValue); // Remove keys if tree conduction\n\n      if (treeConduction) {\n        var _splitRawValues3 = splitRawValues(newRawValues),\n            missingRawValues = _splitRawValues3.missingRawValues,\n            existRawValues = _splitRawValues3.existRawValues;\n\n        var keyList = existRawValues.map(function (val) {\n          return getEntityByValue(val).key;\n        });\n\n        var _conductCheck3 = conductCheck(keyList, {\n          checked: false,\n          halfCheckedKeys: rawHalfCheckedKeys\n        }, conductKeyEntities),\n            checkedKeys = _conductCheck3.checkedKeys;\n\n        newRawValues = [].concat(_toConsumableArray(missingRawValues), _toConsumableArray(checkedKeys.map(function (key) {\n          return getEntityByKey(key).data.value;\n        })));\n      }\n\n      triggerChange(newRawValues, {\n        selected: false,\n        triggerValue: selectValue\n      }, source);\n\n      if (onDeselect) {\n        onDeselect(eventValue, option);\n      }\n    };\n\n    var onInternalClear = function onInternalClear() {\n      triggerChange([], null, 'clear');\n    }; // ========================= Open ==========================\n\n\n    var onInternalDropdownVisibleChange = React.useCallback(function (open) {\n      if (onDropdownVisibleChange) {\n        var legacyParam = {};\n        Object.defineProperty(legacyParam, 'documentClickClose', {\n          get: function get() {\n            warning(false, 'Second param of `onDropdownVisibleChange` has been removed.');\n            return false;\n          }\n        });\n        onDropdownVisibleChange(open, legacyParam);\n      }\n    }, [onDropdownVisibleChange]); // ======================== Warning ========================\n\n    if (process.env.NODE_ENV !== 'production') {\n      warningProps(props);\n    } // ======================== Render =========================\n    // We pass some props into select props style\n\n\n    var selectProps = {\n      optionLabelProp: null,\n      optionFilterProp: treeNodeFilterProp,\n      dropdownAlign: dropdownPopupAlign,\n      internalProps: {\n        mark: INTERNAL_PROPS_MARK,\n        onClear: onInternalClear,\n        skipTriggerChange: true,\n        skipTriggerSelect: true,\n        onRawSelect: onInternalSelect,\n        onRawDeselect: onInternalDeselect\n      }\n    };\n\n    if ('filterTreeNode' in props) {\n      selectProps.filterOption = filterTreeNode;\n    }\n\n    var selectContext = React.useMemo(function () {\n      return {\n        checkable: mergedCheckable,\n        loadData: loadData,\n        treeLoadedKeys: treeLoadedKeys,\n        onTreeLoad: onTreeLoad,\n        checkedKeys: rawValues,\n        halfCheckedKeys: rawHalfCheckedKeys,\n        treeDefaultExpandAll: treeDefaultExpandAll,\n        treeExpandedKeys: treeExpandedKeys,\n        treeDefaultExpandedKeys: treeDefaultExpandedKeys,\n        onTreeExpand: onTreeExpand,\n        treeIcon: treeIcon,\n        treeMotion: treeMotion,\n        showTreeIcon: showTreeIcon,\n        switcherIcon: switcherIcon,\n        treeLine: treeLine,\n        treeNodeFilterProp: treeNodeFilterProp,\n        getEntityByKey: getEntityByKey,\n        getEntityByValue: getEntityByValue\n      };\n    }, [mergedCheckable, loadData, treeLoadedKeys, onTreeLoad, rawValues, rawHalfCheckedKeys, treeDefaultExpandAll, treeExpandedKeys, treeDefaultExpandedKeys, onTreeExpand, treeIcon, treeMotion, showTreeIcon, switcherIcon, treeLine, treeNodeFilterProp, getEntityByKey, getEntityByValue]);\n    return /*#__PURE__*/React.createElement(SelectContext.Provider, {\n      value: selectContext\n    }, /*#__PURE__*/React.createElement(RefSelect, _extends({\n      ref: selectRef,\n      mode: mergedMultiple ? 'multiple' : null\n    }, props, selectProps, {\n      value: selectValues // We will handle this ourself since we need calculate conduction\n      ,\n      labelInValue: true,\n      options: mergedTreeData,\n      onChange: null,\n      onSelect: null,\n      onDeselect: null,\n      onDropdownVisibleChange: onInternalDropdownVisibleChange\n    })));\n  });\n  RefTreeSelect.displayName = 'TreeSelect'; // =================================================================================\n  // =                                    Generic                                    =\n  // =================================================================================\n\n  var TreeSelect = RefTreeSelect;\n  TreeSelect.TreeNode = TreeNode;\n  TreeSelect.SHOW_ALL = SHOW_ALL;\n  TreeSelect.SHOW_PARENT = SHOW_PARENT;\n  TreeSelect.SHOW_CHILD = SHOW_CHILD;\n  return TreeSelect;\n}","map":{"version":3,"sources":["D:/Documents/School Stuff/Web 3/ASG 2/web3asg2/node_modules/rc-tree-select/es/generate.js"],"names":["_extends","_toConsumableArray","_typeof","_slicedToArray","React","useMemo","generateSelector","getLabeledValue","convertDataToEntities","conductCheck","omit","INTERNAL_PROPS_MARK","useMergedState","warning","TreeNode","flattenOptions","filterOptions","isValueDisabled","findValueOption","addValue","removeValue","getRawValueLabeled","toArray","fillFieldNames","warningProps","SelectContext","useTreeData","useKeyValueMap","useKeyValueMapping","formatStrategyKeys","SHOW_ALL","SHOW_PARENT","SHOW_CHILD","fillAdditionalInfo","useSelectValues","OMIT_PROPS","generate","config","prefixCls","optionList","RefSelect","components","convertChildrenToData","omitDOMProps","props","displayName","RefTreeSelect","forwardRef","ref","fieldNames","multiple","treeCheckable","treeCheckStrictly","_props$showCheckedStr","showCheckedStrategy","labelInValue","loadData","treeLoadedKeys","_props$treeNodeFilter","treeNodeFilterProp","treeNodeLabelProp","treeDataSimpleMode","treeData","treeExpandedKeys","treeDefaultExpandedKeys","treeDefaultExpandAll","children","treeIcon","showTreeIcon","switcherIcon","treeLine","treeMotion","filterTreeNode","dropdownPopupAlign","onChange","onTreeExpand","onTreeLoad","onDropdownVisibleChange","onSelect","onDeselect","labelRender","mergedCheckable","mergedMultiple","treeConduction","mergedLabelInValue","mergedFieldNames","getTreeNodeTitle","node","title","label","getTreeNodeLabelProp","entity","val","undefined","data","mergedTreeData","getLabelProp","simpleMode","flattedOptions","_useKeyValueMap","_useKeyValueMap2","cacheKeyMap","cacheValueMap","_useKeyValueMapping","_useKeyValueMapping2","getEntityByKey","getEntityByValue","_useMemo","keyEntities","conductKeyEntities","selectRef","useRef","useImperativeHandle","scrollTo","current","focus","blur","_useMergedState","defaultValue","value","_useMergedState2","setValue","splitRawValues","newRawValues","missingRawValues","existRawValues","forEach","push","_useMemo2","valueHalfCheckedKeys","item","halfChecked","key","_splitRawValues","keyList","map","_conductCheck","checkedKeys","halfCheckedKeys","concat","_useMemo3","rawValues","rawHalfCheckedKeys","selectValues","triggerChange","extra","source","eventValues","formattedKeyList","_ref","triggerValue","selected","returnValues","halfValues","filter","includes","additionalInfo","preValue","showPosition","checked","onInternalSelect","selectValue","option","eventValue","_splitRawValues2","_conductCheck2","onInternalDeselect","_splitRawValues3","_conductCheck3","onInternalClear","onInternalDropdownVisibleChange","useCallback","open","legacyParam","Object","defineProperty","get","process","env","NODE_ENV","selectProps","optionLabelProp","optionFilterProp","dropdownAlign","internalProps","mark","onClear","skipTriggerChange","skipTriggerSelect","onRawSelect","onRawDeselect","filterOption","selectContext","checkable","createElement","Provider","mode","options","TreeSelect"],"mappings":"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","sourcesContent":["import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _typeof from \"@babel/runtime/helpers/esm/typeof\";\nimport _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport * as React from 'react';\nimport { useMemo } from 'react';\nimport generateSelector from \"rc-select/es/generate\";\nimport { getLabeledValue } from \"rc-select/es/utils/valueUtil\";\nimport { convertDataToEntities } from \"rc-tree/es/utils/treeUtil\";\nimport { conductCheck } from \"rc-tree/es/utils/conductUtil\";\nimport omit from \"rc-util/es/omit\";\nimport { INTERNAL_PROPS_MARK } from \"rc-select/es/interface/generator\";\nimport useMergedState from \"rc-util/es/hooks/useMergedState\";\nimport warning from \"rc-util/es/warning\";\nimport TreeNode from './TreeNode';\nimport { flattenOptions, filterOptions, isValueDisabled, findValueOption, addValue, removeValue, getRawValueLabeled, toArray, fillFieldNames } from './utils/valueUtil';\nimport warningProps from './utils/warningPropsUtil';\nimport { SelectContext } from './Context';\nimport useTreeData from './hooks/useTreeData';\nimport useKeyValueMap from './hooks/useKeyValueMap';\nimport useKeyValueMapping from './hooks/useKeyValueMapping';\nimport { formatStrategyKeys, SHOW_ALL, SHOW_PARENT, SHOW_CHILD } from './utils/strategyUtil';\nimport { fillAdditionalInfo } from './utils/legacyUtil';\nimport useSelectValues from './hooks/useSelectValues';\nvar OMIT_PROPS = ['expandedKeys', 'treeData', 'treeCheckable', 'showCheckedStrategy', 'searchPlaceholder', 'treeLine', 'treeIcon', 'showTreeIcon', 'switcherIcon', 'treeNodeFilterProp', 'filterTreeNode', 'dropdownPopupAlign', 'treeDefaultExpandAll', 'treeCheckStrictly', 'treeExpandedKeys', 'treeLoadedKeys', 'treeMotion', 'onTreeExpand', 'onTreeLoad', 'labelRender', 'loadData', 'treeDataSimpleMode', 'treeNodeLabelProp', 'treeDefaultExpandedKeys'];\nexport default function generate(config) {\n  var prefixCls = config.prefixCls,\n      optionList = config.optionList;\n  var RefSelect = generateSelector({\n    prefixCls: prefixCls,\n    components: {\n      optionList: optionList\n    },\n    // Not use generate since we will handle ourself\n    convertChildrenToData: function convertChildrenToData() {\n      return null;\n    },\n    flattenOptions: flattenOptions,\n    // Handle `optionLabelProp` in TreeSelect component\n    getLabeledValue: getLabeledValue,\n    filterOptions: filterOptions,\n    isValueDisabled: isValueDisabled,\n    findValueOption: findValueOption,\n    omitDOMProps: function omitDOMProps(props) {\n      return omit(props, OMIT_PROPS);\n    }\n  });\n  RefSelect.displayName = 'Select'; // =================================================================================\n  // =                                      Tree                                     =\n  // =================================================================================\n\n  var RefTreeSelect = /*#__PURE__*/React.forwardRef(function (props, ref) {\n    var fieldNames = props.fieldNames,\n        multiple = props.multiple,\n        treeCheckable = props.treeCheckable,\n        treeCheckStrictly = props.treeCheckStrictly,\n        _props$showCheckedStr = props.showCheckedStrategy,\n        showCheckedStrategy = _props$showCheckedStr === void 0 ? 'SHOW_CHILD' : _props$showCheckedStr,\n        labelInValue = props.labelInValue,\n        loadData = props.loadData,\n        treeLoadedKeys = props.treeLoadedKeys,\n        _props$treeNodeFilter = props.treeNodeFilterProp,\n        treeNodeFilterProp = _props$treeNodeFilter === void 0 ? 'value' : _props$treeNodeFilter,\n        treeNodeLabelProp = props.treeNodeLabelProp,\n        treeDataSimpleMode = props.treeDataSimpleMode,\n        treeData = props.treeData,\n        treeExpandedKeys = props.treeExpandedKeys,\n        treeDefaultExpandedKeys = props.treeDefaultExpandedKeys,\n        treeDefaultExpandAll = props.treeDefaultExpandAll,\n        children = props.children,\n        treeIcon = props.treeIcon,\n        showTreeIcon = props.showTreeIcon,\n        switcherIcon = props.switcherIcon,\n        treeLine = props.treeLine,\n        treeMotion = props.treeMotion,\n        filterTreeNode = props.filterTreeNode,\n        dropdownPopupAlign = props.dropdownPopupAlign,\n        onChange = props.onChange,\n        onTreeExpand = props.onTreeExpand,\n        onTreeLoad = props.onTreeLoad,\n        onDropdownVisibleChange = props.onDropdownVisibleChange,\n        onSelect = props.onSelect,\n        onDeselect = props.onDeselect,\n        labelRender = props.labelRender;\n    var mergedCheckable = treeCheckable || treeCheckStrictly;\n    var mergedMultiple = multiple || mergedCheckable;\n    var treeConduction = treeCheckable && !treeCheckStrictly;\n    var mergedLabelInValue = treeCheckStrictly || labelInValue; // ======================= Tree Data =======================\n    // FieldNames\n\n    var mergedFieldNames = fillFieldNames(fieldNames, true); // Legacy both support `label` or `title` if not set.\n    // We have to fallback to function to handle this\n\n    var getTreeNodeTitle = function getTreeNodeTitle(node) {\n      if (!treeData) {\n        return node.title;\n      }\n\n      if (mergedFieldNames === null || mergedFieldNames === void 0 ? void 0 : mergedFieldNames.label) {\n        return node[mergedFieldNames.label];\n      }\n\n      return node.label || node.title;\n    };\n\n    var getTreeNodeLabelProp = function getTreeNodeLabelProp(entity, val) {\n      if (labelRender) {\n        return labelRender(entity, val);\n      } // Skip since entity not exist\n\n\n      if (!entity) {\n        return undefined;\n      }\n\n      var node = entity.data.node;\n\n      if (treeNodeLabelProp) {\n        return node[treeNodeLabelProp];\n      }\n\n      return getTreeNodeTitle(node);\n    };\n\n    var mergedTreeData = useTreeData(treeData, children, {\n      getLabelProp: getTreeNodeTitle,\n      simpleMode: treeDataSimpleMode,\n      fieldNames: mergedFieldNames\n    });\n    var flattedOptions = useMemo(function () {\n      return flattenOptions(mergedTreeData);\n    }, [mergedTreeData]);\n\n    var _useKeyValueMap = useKeyValueMap(flattedOptions),\n        _useKeyValueMap2 = _slicedToArray(_useKeyValueMap, 2),\n        cacheKeyMap = _useKeyValueMap2[0],\n        cacheValueMap = _useKeyValueMap2[1];\n\n    var _useKeyValueMapping = useKeyValueMapping(cacheKeyMap, cacheValueMap),\n        _useKeyValueMapping2 = _slicedToArray(_useKeyValueMapping, 2),\n        getEntityByKey = _useKeyValueMapping2[0],\n        getEntityByValue = _useKeyValueMapping2[1]; // Only generate keyEntities for check conduction when is `treeCheckable`\n\n\n    var _useMemo = useMemo(function () {\n      if (treeConduction) {\n        return convertDataToEntities(mergedTreeData);\n      }\n\n      return {\n        keyEntities: null\n      };\n    }, [mergedTreeData, treeCheckable, treeCheckStrictly]),\n        conductKeyEntities = _useMemo.keyEntities; // ========================== Ref ==========================\n\n\n    var selectRef = React.useRef(null);\n    React.useImperativeHandle(ref, function () {\n      return {\n        scrollTo: selectRef.current.scrollTo,\n        focus: selectRef.current.focus,\n        blur: selectRef.current.blur,\n\n        /** @private Internal usage. It's save to remove if `rc-cascader` not use it any longer */\n        getEntityByValue: getEntityByValue\n      };\n    }); // ========================= Value =========================\n\n    var _useMergedState = useMergedState(props.defaultValue, {\n      value: props.value\n    }),\n        _useMergedState2 = _slicedToArray(_useMergedState, 2),\n        value = _useMergedState2[0],\n        setValue = _useMergedState2[1];\n    /** Get `missingRawValues` which not exist in the tree yet */\n\n\n    var splitRawValues = function splitRawValues(newRawValues) {\n      var missingRawValues = [];\n      var existRawValues = []; // Keep missing value in the cache\n\n      newRawValues.forEach(function (val) {\n        if (getEntityByValue(val)) {\n          existRawValues.push(val);\n        } else {\n          missingRawValues.push(val);\n        }\n      });\n      return {\n        missingRawValues: missingRawValues,\n        existRawValues: existRawValues\n      };\n    };\n\n    var _useMemo2 = useMemo(function () {\n      var valueHalfCheckedKeys = [];\n      var newRawValues = [];\n      toArray(value).forEach(function (item) {\n        if (item && _typeof(item) === 'object' && 'value' in item) {\n          if (item.halfChecked && treeCheckStrictly) {\n            var entity = getEntityByValue(item.value);\n            valueHalfCheckedKeys.push(entity ? entity.key : item.value);\n          } else {\n            newRawValues.push(item.value);\n          }\n        } else {\n          newRawValues.push(item);\n        }\n      }); // We need do conduction of values\n\n      // We need do conduction of values\n      if (treeConduction) {\n        var _splitRawValues = splitRawValues(newRawValues),\n            missingRawValues = _splitRawValues.missingRawValues,\n            existRawValues = _splitRawValues.existRawValues;\n\n        var keyList = existRawValues.map(function (val) {\n          return getEntityByValue(val).key;\n        });\n\n        var _conductCheck = conductCheck(keyList, true, conductKeyEntities),\n            checkedKeys = _conductCheck.checkedKeys,\n            halfCheckedKeys = _conductCheck.halfCheckedKeys;\n\n        return [[].concat(_toConsumableArray(missingRawValues), _toConsumableArray(checkedKeys.map(function (key) {\n          return getEntityByKey(key).data.value;\n        }))), halfCheckedKeys];\n      }\n\n      return [newRawValues, valueHalfCheckedKeys];\n    }, [value, flattedOptions, mergedMultiple, mergedLabelInValue, treeCheckable, treeCheckStrictly]),\n        _useMemo3 = _slicedToArray(_useMemo2, 2),\n        rawValues = _useMemo3[0],\n        rawHalfCheckedKeys = _useMemo3[1];\n\n    var selectValues = useSelectValues(rawValues, {\n      treeConduction: treeConduction,\n      value: value,\n      showCheckedStrategy: showCheckedStrategy,\n      conductKeyEntities: conductKeyEntities,\n      getEntityByValue: getEntityByValue,\n      getEntityByKey: getEntityByKey,\n      getLabelProp: getTreeNodeLabelProp\n    });\n\n    var triggerChange = function triggerChange(newRawValues, extra, source) {\n      setValue(mergedMultiple ? newRawValues : newRawValues[0]);\n\n      if (onChange) {\n        var eventValues = newRawValues;\n\n        if (treeConduction && showCheckedStrategy !== 'SHOW_ALL') {\n          var keyList = newRawValues.map(function (val) {\n            var entity = getEntityByValue(val);\n            return entity ? entity.key : val;\n          });\n          var formattedKeyList = formatStrategyKeys(keyList, showCheckedStrategy, conductKeyEntities);\n          eventValues = formattedKeyList.map(function (key) {\n            var entity = getEntityByKey(key);\n            return entity ? entity.data.value : key;\n          });\n        }\n\n        var _ref = extra || {\n          triggerValue: undefined,\n          selected: undefined\n        },\n            triggerValue = _ref.triggerValue,\n            selected = _ref.selected;\n\n        var returnValues = mergedLabelInValue ? getRawValueLabeled(eventValues, value, getEntityByValue, getTreeNodeLabelProp) : eventValues; // We need fill half check back\n\n        if (treeCheckStrictly) {\n          var halfValues = rawHalfCheckedKeys.map(function (key) {\n            var entity = getEntityByKey(key);\n            return entity ? entity.data.value : key;\n          }).filter(function (val) {\n            return !eventValues.includes(val);\n          });\n          returnValues = [].concat(_toConsumableArray(returnValues), _toConsumableArray(getRawValueLabeled(halfValues, value, getEntityByValue, getTreeNodeLabelProp)));\n        }\n\n        var additionalInfo = {\n          // [Legacy] Always return as array contains label & value\n          preValue: selectValues,\n          triggerValue: triggerValue\n        }; // [Legacy] Fill legacy data if user query.\n        // This is expansive that we only fill when user query\n        // https://github.com/react-component/tree-select/blob/fe33eb7c27830c9ac70cd1fdb1ebbe7bc679c16a/src/Select.jsx\n\n        var showPosition = true;\n\n        if (treeCheckStrictly || source === 'selection' && !selected) {\n          showPosition = false;\n        }\n\n        fillAdditionalInfo(additionalInfo, triggerValue, newRawValues, mergedTreeData, showPosition);\n\n        if (mergedCheckable) {\n          additionalInfo.checked = selected;\n        } else {\n          additionalInfo.selected = selected;\n        }\n\n        onChange(mergedMultiple ? returnValues : returnValues[0], mergedLabelInValue ? null : eventValues.map(function (val) {\n          var entity = getEntityByValue(val);\n          return entity ? entity.data.title : null;\n        }), additionalInfo);\n      }\n    };\n\n    var onInternalSelect = function onInternalSelect(selectValue, option, source) {\n      var eventValue = mergedLabelInValue ? selectValue : selectValue;\n\n      if (!mergedMultiple) {\n        // Single mode always set value\n        triggerChange([selectValue], {\n          selected: true,\n          triggerValue: selectValue\n        }, source);\n      } else {\n        var newRawValues = addValue(rawValues, selectValue); // Add keys if tree conduction\n\n        if (treeConduction) {\n          // Should keep missing values\n          var _splitRawValues2 = splitRawValues(newRawValues),\n              missingRawValues = _splitRawValues2.missingRawValues,\n              existRawValues = _splitRawValues2.existRawValues;\n\n          var keyList = existRawValues.map(function (val) {\n            return getEntityByValue(val).key;\n          });\n\n          var _conductCheck2 = conductCheck(keyList, true, conductKeyEntities),\n              checkedKeys = _conductCheck2.checkedKeys;\n\n          newRawValues = [].concat(_toConsumableArray(missingRawValues), _toConsumableArray(checkedKeys.map(function (key) {\n            return getEntityByKey(key).data.value;\n          })));\n        }\n\n        triggerChange(newRawValues, {\n          selected: true,\n          triggerValue: selectValue\n        }, source);\n      }\n\n      if (onSelect) {\n        onSelect(eventValue, option);\n      }\n    };\n\n    var onInternalDeselect = function onInternalDeselect(selectValue, option, source) {\n      var eventValue = mergedLabelInValue ? selectValue : selectValue;\n      var newRawValues = removeValue(rawValues, selectValue); // Remove keys if tree conduction\n\n      if (treeConduction) {\n        var _splitRawValues3 = splitRawValues(newRawValues),\n            missingRawValues = _splitRawValues3.missingRawValues,\n            existRawValues = _splitRawValues3.existRawValues;\n\n        var keyList = existRawValues.map(function (val) {\n          return getEntityByValue(val).key;\n        });\n\n        var _conductCheck3 = conductCheck(keyList, {\n          checked: false,\n          halfCheckedKeys: rawHalfCheckedKeys\n        }, conductKeyEntities),\n            checkedKeys = _conductCheck3.checkedKeys;\n\n        newRawValues = [].concat(_toConsumableArray(missingRawValues), _toConsumableArray(checkedKeys.map(function (key) {\n          return getEntityByKey(key).data.value;\n        })));\n      }\n\n      triggerChange(newRawValues, {\n        selected: false,\n        triggerValue: selectValue\n      }, source);\n\n      if (onDeselect) {\n        onDeselect(eventValue, option);\n      }\n    };\n\n    var onInternalClear = function onInternalClear() {\n      triggerChange([], null, 'clear');\n    }; // ========================= Open ==========================\n\n\n    var onInternalDropdownVisibleChange = React.useCallback(function (open) {\n      if (onDropdownVisibleChange) {\n        var legacyParam = {};\n        Object.defineProperty(legacyParam, 'documentClickClose', {\n          get: function get() {\n            warning(false, 'Second param of `onDropdownVisibleChange` has been removed.');\n            return false;\n          }\n        });\n        onDropdownVisibleChange(open, legacyParam);\n      }\n    }, [onDropdownVisibleChange]); // ======================== Warning ========================\n\n    if (process.env.NODE_ENV !== 'production') {\n      warningProps(props);\n    } // ======================== Render =========================\n    // We pass some props into select props style\n\n\n    var selectProps = {\n      optionLabelProp: null,\n      optionFilterProp: treeNodeFilterProp,\n      dropdownAlign: dropdownPopupAlign,\n      internalProps: {\n        mark: INTERNAL_PROPS_MARK,\n        onClear: onInternalClear,\n        skipTriggerChange: true,\n        skipTriggerSelect: true,\n        onRawSelect: onInternalSelect,\n        onRawDeselect: onInternalDeselect\n      }\n    };\n\n    if ('filterTreeNode' in props) {\n      selectProps.filterOption = filterTreeNode;\n    }\n\n    var selectContext = React.useMemo(function () {\n      return {\n        checkable: mergedCheckable,\n        loadData: loadData,\n        treeLoadedKeys: treeLoadedKeys,\n        onTreeLoad: onTreeLoad,\n        checkedKeys: rawValues,\n        halfCheckedKeys: rawHalfCheckedKeys,\n        treeDefaultExpandAll: treeDefaultExpandAll,\n        treeExpandedKeys: treeExpandedKeys,\n        treeDefaultExpandedKeys: treeDefaultExpandedKeys,\n        onTreeExpand: onTreeExpand,\n        treeIcon: treeIcon,\n        treeMotion: treeMotion,\n        showTreeIcon: showTreeIcon,\n        switcherIcon: switcherIcon,\n        treeLine: treeLine,\n        treeNodeFilterProp: treeNodeFilterProp,\n        getEntityByKey: getEntityByKey,\n        getEntityByValue: getEntityByValue\n      };\n    }, [mergedCheckable, loadData, treeLoadedKeys, onTreeLoad, rawValues, rawHalfCheckedKeys, treeDefaultExpandAll, treeExpandedKeys, treeDefaultExpandedKeys, onTreeExpand, treeIcon, treeMotion, showTreeIcon, switcherIcon, treeLine, treeNodeFilterProp, getEntityByKey, getEntityByValue]);\n    return /*#__PURE__*/React.createElement(SelectContext.Provider, {\n      value: selectContext\n    }, /*#__PURE__*/React.createElement(RefSelect, _extends({\n      ref: selectRef,\n      mode: mergedMultiple ? 'multiple' : null\n    }, props, selectProps, {\n      value: selectValues // We will handle this ourself since we need calculate conduction\n      ,\n      labelInValue: true,\n      options: mergedTreeData,\n      onChange: null,\n      onSelect: null,\n      onDeselect: null,\n      onDropdownVisibleChange: onInternalDropdownVisibleChange\n    })));\n  });\n  RefTreeSelect.displayName = 'TreeSelect'; // =================================================================================\n  // =                                    Generic                                    =\n  // =================================================================================\n\n  var TreeSelect = RefTreeSelect;\n  TreeSelect.TreeNode = TreeNode;\n  TreeSelect.SHOW_ALL = SHOW_ALL;\n  TreeSelect.SHOW_PARENT = SHOW_PARENT;\n  TreeSelect.SHOW_CHILD = SHOW_CHILD;\n  return TreeSelect;\n}"]},"metadata":{},"sourceType":"module"}